<?xml version="1.0" encoding="utf-8"?>
<configuration>

  <configSections>
    <section name="UserNameTransformRules" type="MultiFactor.Ldap.Adapter.Configuration.UserNameTransformRulesSection, multifactor-ldap-adapter" />
  </configSections>
  
  <appSettings>
	<!--This service LDAPS (TLS) endpoint (0.0.0.0 - listen all interfaces) -->
	<add key="adapter-ldaps-endpoint" value="d.d.0.0:635"/>

	<!--Active Directory IP or domain -->
	<add key="ldap-server" value="ldap://dc1.multifactor.dev"/>
	
	<!-- Base DN for user binding. Example: cn=users,cn=accounts,dc=domain,dc=local -->
	<!--add key="ldap-base-dn" value="CN=Users,DC=multifactor,DC=local"/-->

    <!--List of service accounts (Bind DN) delmitted by semicolon (option 1)-->
    <!--add key="ldap-service-accounts" value=""/-->

    <!--Service accounts (Bind DN) organization unit (OU) (option 2)-->
    <add key="ldap-service-accounts-ou" value="OU=Service Accounts"/>

    <!--ActiveDirectory access group (optional);-->
	<!--add key="active-directory-group" value="MyApp Users"/-->

	<!--ActiveDirectory 2FA group (optional);-->
    <!--add key="active-directory-2fa-group" value="MyApp 2FA Users"/-->

	<!-- get it from multifactor management panel -->
	<add key="multifactor-nas-identifier" value="rs_7caee2ad523ce6c2a52293d08a54b"/>
	<!-- get it from multifactor management panel -->
	<add key="multifactor-shared-secret" value="1e1f1d2becb8a35cd988a7aca76508d5"/>

	<!--HTTP proxy for API (optional)-->
    <!--add key="multifactor-api-proxy" value="http://proxy:3128"/-->

    <!-- minimal log level: 'Debug', 'Info', 'Warn', 'Error' -->
    <add key="logging-level" value="Debug"/>
    <!--<add key="logging-format" value="json"/>-->
  </appSettings>
 
    <UserNameTransformRules>
		<BeforeFirstFactor>
			<add match="d.jones" replace="o.brezhnev" />
		</BeforeFirstFactor>
		<BeforeSecondFactor>
			<add match="d.jones" replace="o.brezhnev" />
		</BeforeSecondFactor>
    </UserNameTransformRules>
</configuration>
